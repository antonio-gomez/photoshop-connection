module.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){/*
	 *
	 *  Photoshop-Connection
	 *  Node.js module for connecting to Adobe Photoshop Server.
	 *  Author: Antonio Gomez (https://github.com/antonio-gomez)
	 * 
	 *
	 *  @link https://github.com/antonio-gomez/photoshop-connection
	 *  @version v0.0.0
	 *  @license MIT
	 *
	 */
"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.photoshop=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(14),u=function(){function t(){r(this,t)}return i(t,[{key:"createClient",value:function(t){return new o.PhotoshopClient(t)}}]),t}();e.photoshop=new u;t.exports=new u},function(t,e){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(a===setTimeout)return setTimeout(t,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(t,0);try{return a(t,0)}catch(e){try{return a.call(null,t,0)}catch(e){return a.call(this,t,0)}}}function o(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function u(){d&&h&&(d=!1,h.length?y=h.concat(y):v=-1,y.length&&s())}function s(){if(!d){var t=i(u);d=!0;for(var e=y.length;e;){for(h=y,y=[];++v<e;)h&&h[v].run();v=-1,e=y.length}h=null,d=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function f(){}var a,p,l=t.exports={};!function(){try{a="function"==typeof setTimeout?setTimeout:n}catch(t){a=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var h,y=[],d=!1,v=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];y.push(new c(t,e)),1!==y.length||d||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=f,l.addListener=f,l.once=f,l.off=f,l.removeListener=f,l.removeAllListeners=f,l.emit=f,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){(function(t,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,n){if(o()<n)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n),e.__proto__=t.prototype):(null===e&&(e=new t(n)),e.length=n),e}function t(e,n,r){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,n,r);if("number"==typeof e){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return a(this,e)}return s(this,e,n,r)}function s(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,n,r):"string"==typeof e?p(t,e,n):y(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,r){return c(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}function a(e,n){if(c(n),e=u(e,n<0?0:0|d(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)e[r]=0;return e}function p(e,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(n,r);e=u(e,i);var o=e.write(n,r);return o!==i&&(e=e.slice(0,o)),e}function l(t,e){var n=e.length<0?0:0|d(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(e,n,r,i){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===i?new Uint8Array(n):void 0===i?new Uint8Array(n,r):new Uint8Array(n,r,i),t.TYPED_ARRAY_SUPPORT?(e=n,e.__proto__=t.prototype):e=l(e,n),e}function y(e,n){if(t.isBuffer(n)){var r=0|d(n.length);return e=u(e,r),0===e.length?e:(n.copy(e,0,0,r),e)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||V(n.length)?u(e,0):l(e,n);if("Buffer"===n.type&&q(n.data))return l(e,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function v(e){return+e!=e&&(e=0),t.alloc(+e)}function m(e,n){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(i)return Q(e).length;n=(""+n).toLowerCase(),i=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return j(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(e,n,r,i,o){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=t.from(n,i)),t.isBuffer(n))return 0===n.length?-1:b(e,n,r,i,o);if("number"==typeof n)return n&=255,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):b(e,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){function o(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}var u=1,s=t.length,c=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;u=2,s/=2,c/=2,n/=2}var f;if(i){var a=-1;for(f=n;f<s;f++)if(o(t,f)===o(e,a===-1?0:f-a)){if(a===-1&&(a=f),f-a+1===c)return a*u}else a!==-1&&(f-=f-a),a=-1}else for(n+c>s&&(n=s-c),f=n;f>=0;f--){for(var p=!0,l=0;l<c;l++)if(o(t,f+l)!==o(e,l)){p=!1;break}if(p)return f}return-1}function E(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var u=0;u<r;++u){var s=parseInt(e.substr(2*u,2),16);if(isNaN(s))return u;t[n+u]=s}return u}function S(t,e,n,r){return K(Q(e,t.length-n),t,n,r)}function T(t,e,n,r){return K(J(e),t,n,r)}function A(t,e,n,r){return T(t,e,n,r)}function R(t,e,n,r){return K(H(e),t,n,r)}function B(t,e,n,r){return K($(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],u=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var c,f,a,p;switch(s){case 1:o<128&&(u=o);break;case 2:c=t[i+1],128===(192&c)&&(p=(31&o)<<6|63&c,p>127&&(u=p));break;case 3:c=t[i+1],f=t[i+2],128===(192&c)&&128===(192&f)&&(p=(15&o)<<12|(63&c)<<6|63&f,p>2047&&(p<55296||p>57343)&&(u=p));break;case 4:c=t[i+1],f=t[i+2],a=t[i+3],128===(192&c)&&128===(192&f)&&128===(192&a)&&(p=(15&o)<<18|(63&c)<<12|(63&f)<<6|63&a,p>65535&&p<1114112&&(u=p))}}null===u?(u=65533,s=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=s}return x(r)}function x(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function j(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=W(t[o]);return i}function C(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function U(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,n,r,i,o,u){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<u)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Y(t,e,n,r,i){return i||M(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return i||M(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,n,r,52,8),n+8}function z(t){if(t=G(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return t<16?"0"+t.toString(16):t.toString(16)}function Q(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],u=0;u<r;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(u+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function J(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function $(t,e){for(var n,r,i,o=[],u=0;u<t.length&&!((e-=2)<0);++u)n=t.charCodeAt(u),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function H(t){return Z.toByteArray(z(t))}function K(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function V(t){return t!==t}var Z=n(5),X=n(7),q=n(8);e.Buffer=t,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:i(),e.kMaxLength=o(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,n){return s(null,t,e,n)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,n){return f(null,t,e,n)},t.allocUnsafe=function(t){return a(null,t)},t.allocUnsafeSlow=function(t){return a(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,i=n.length,o=0,u=Math.min(r,i);o<u;++o)if(e[o]!==n[o]){r=e[o],i=n[o];break}return r<i?-1:i<r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var i=t.allocUnsafe(n),o=0;for(r=0;r<e.length;++r){var u=e[r];if(!t.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},t.byteLength=m,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):g.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,n,r,i,o){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var u=o-i,s=r-n,c=Math.min(u,s),f=this.slice(i,o),a=e.slice(n,r),p=0;p<c;++p)if(f[p]!==a[p]){u=f[p],s=a[p];break}return u<s?-1:s<u?1:0},t.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},t.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},t.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return R(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=this.subarray(e,n),i.__proto__=t.prototype;else{var o=n-e;i=new t(o,void 0);for(var u=0;u<o;++u)i[u]=this[u+e]}return i},t.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},t.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},t.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),X.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),X.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),X.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),X.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;D(this,t,e,n,i,0)}var o=1,u=0;for(this[e]=255&t;++u<n&&(o*=256);)this[e+u]=t/o&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;D(this,t,e,n,i,0)}var o=n-1,u=1;for(this[e+o]=255&t;--o>=0&&(u*=256);)this[e+o]=t/u&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):L(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):L(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):N(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):N(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,u=1,s=0;for(this[e]=255&t;++o<n&&(u*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/u>>0)-s&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,u=1,s=0;for(this[e+o]=255&t;--o>=0&&(u*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/u>>0)-s&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):L(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):L(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):N(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n|=0,r||D(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):N(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return Y(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return Y(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var o,u=i-r;if(this===e&&r<n&&n<i)for(o=u-1;o>=0;--o)e[o+n]=this[o+r];else if(u<1e3||!t.TYPED_ARRAY_SUPPORT)for(o=0;o<u;++o)e[o+n]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+u),n);return u},t.prototype.fill=function(e,n,r,i){if("string"==typeof e){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var u;if("number"==typeof e)for(u=n;u<r;++u)this[u]=e;else{var s=t.isBuffer(e)?e:Q(new t(e,i).toString()),c=s.length;for(u=0;u<r-n;++u)this[u+n]=s[u%c]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,n(2).Buffer,function(){return this}())},function(t,e){"use strict"},function(t,e,n){(function(t,r){"use strict";function i(t,e){this._id=t,this._clearFn=e}var o=n(1).nextTick,u=Function.prototype.apply,s=Array.prototype.slice,c={},f=0;e.setTimeout=function(){return new i(u.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(u.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=f++,r=!(arguments.length<2)&&s.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete c[t]}}).call(e,n(4).setImmediate,n(4).clearImmediate)},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function i(t){var e,r,i,o,u,s,c=t.length;u=n(t),s=new a(3*c/4-u),i=u>0?c-4:c;var p=0;for(e=0,r=0;e<i;e+=4,r+=3)o=f[t.charCodeAt(e)]<<18|f[t.charCodeAt(e+1)]<<12|f[t.charCodeAt(e+2)]<<6|f[t.charCodeAt(e+3)],s[p++]=o>>16&255,s[p++]=o>>8&255,s[p++]=255&o;return 2===u?(o=f[t.charCodeAt(e)]<<2|f[t.charCodeAt(e+1)]>>4,s[p++]=255&o):1===u&&(o=f[t.charCodeAt(e)]<<10|f[t.charCodeAt(e+1)]<<4|f[t.charCodeAt(e+2)]>>2,s[p++]=o>>8&255,s[p++]=255&o),s}function o(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function u(t,e,n){for(var r,i=[],u=e;u<n;u+=3)r=(t[u]<<16)+(t[u+1]<<8)+t[u+2],i.push(o(r));return i.join("")}function s(t){for(var e,n=t.length,r=n%3,i="",o=[],s=16383,f=0,a=n-r;f<a;f+=s)o.push(u(t,f,f+s>a?a:f+s));return 1===r?(e=t[n-1],i+=c[e>>2],i+=c[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=c[e>>10],i+=c[e>>4&63],i+=c[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=r,e.toByteArray=i,e.fromByteArray=s;for(var c=[],f=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,h=p.length;l<h;++l)c[l]=p[l],f[p.charCodeAt(l)]=l;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"===("undefined"==typeof t?"undefined":s(t))&&null!==t}function u(t){return void 0===t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,c,f;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var a=new Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(n=this._events[t],u(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),f=n.slice(),i=f.length,c=0;c<i;c++)f[c].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,u,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],u=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=u;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"use strict";e.read=function(t,e,n,r,i){var o,u,s=8*i-r-1,c=(1<<s)-1,f=c>>1,a=-7,p=n?i-1:0,l=n?-1:1,h=t[e+p];for(p+=l,o=h&(1<<-a)-1,h>>=-a,a+=s;a>0;o=256*o+t[e+p],p+=l,a-=8);for(u=o&(1<<-a)-1,o>>=-a,a+=r;a>0;u=256*u+t[e+p],p+=l,a-=8);if(0===o)o=1-f;else{if(o===c)return u?NaN:(h?-1:1)*(1/0);u+=Math.pow(2,r),o-=f}return(h?-1:1)*u*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var u,s,c,f=8*o-i-1,a=(1<<f)-1,p=a>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,y=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,u=a):(u=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-u))<1&&(u--,c*=2),e+=u+p>=1?l/c:l*Math.pow(2,1-p),e*c>=2&&(u++,c/=2),u+p>=a?(s=0,u=a):u+p>=1?(s=(e*c-1)*Math.pow(2,i),u+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),u=0));i>=8;t[n+h]=255&s,h+=y,s/=256,i-=8);for(u=u<<i|s,f+=i;f>0;t[n+h]=255&u,h+=y,u/=256,f-=8);t[n+h-y]|=128*d}},function(t,e){"use strict";var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r,i;(function(t,o,u){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"===s(e)&&"object"===s(u))u.exports=t();else{r=t,i="function"==typeof r?r.call(e,n,e,u):r,!(void 0!==i&&(u.exports=i))}}(function(){function e(t){return function(){return V.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return"[object StopIteration]"===it(t)||t instanceof J}function i(t,e){if(W&&e.stack&&"object"===("undefined"==typeof t?"undefined":s(t))&&null!==t&&t.stack&&t.stack.indexOf(ot)===-1){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+ot+"\n");t.stack=u(i)}}function u(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];a(i)||c(i)||!i||n.push(i)}return n.join("\n")}function c(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function f(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function a(t){var e=f(t);if(!e)return!1;var n=e[0],r=e[1];return n===Q&&r>=$&&r<=at}function p(){if(W)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=f(e);if(!n)return;return Q=n[0],n[1]}}function l(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function h(t){return t instanceof m?t:b(t)?x(t):P(t)}function y(){function t(t){e=t,o.source=t,X(n,function(e,n){h.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=et(y.prototype),o=et(m.prototype);if(o.promiseDispatch=function(t,i,o){var u=Z(arguments);n?(n.push(u),"when"===i&&o[1]&&r.push(o[1])):h.nextTick(function(){e.promiseDispatch.apply(e,u)})},o.valueOf=function(){if(n)return o;var t=w(e);return _(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},h.longStackSupport&&W)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(h(n))},i.fulfill=function(n){e||t(P(n))},i.reject=function(n){e||t(k(n))},i.notify=function(t){e||X(r,function(e,n){h.nextTick(function(){n(t)})},void 0)},i}function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=y();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function v(t){return d(function(e,n){for(var r=0,i=t.length;r<i;r++)h(t[r]).then(e,n)})}function m(t,e,n){void 0===e&&(e=function(t){return k(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=et(m.prototype);if(r.promiseDispatch=function(n,i,o){var u;try{u=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(t){u=k(t)}n&&n(u)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function g(t,e,n,r){return h(t).then(e,n,r)}function w(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof m}function b(t){return n(t)&&"function"==typeof t.then}function E(t){return _(t)&&"pending"===t.inspect().state}function S(t){return!_(t)||"fulfilled"===t.inspect().state}function T(t){return _(t)&&"rejected"===t.inspect().state}function A(){ut.length=0,st.length=0,ft||(ft=!0)}function R(e,n){ft&&("object"===("undefined"==typeof t?"undefined":s(t))&&"function"==typeof t.emit&&h.nextTick.runAfter(function(){q(st,e)!==-1&&(t.emit("unhandledRejection",n,e),ct.push(e))}),st.push(e),n&&"undefined"!=typeof n.stack?ut.push(n.stack):ut.push("(no stack) "+n))}function B(e){if(ft){var n=q(st,e);n!==-1&&("object"===("undefined"==typeof t?"undefined":s(t))&&"function"==typeof t.emit&&h.nextTick.runAfter(function(){var r=q(ct,e);r!==-1&&(t.emit("rejectionHandled",ut[n],e),ct.splice(r,1))}),st.splice(n,1),ut.splice(n,1))}}function k(t){var e=m({when:function(e){return e&&B(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return R(e,t),e}function P(t){return m({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return rt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function x(t){var e=y();return h.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function O(t){return m({isDef:function(){}},function(e,n){return L(t,e,n)},function(){return h(t).inspect()})}function j(t,e,n){return h(t).spread(e,n)}function I(t){return function(){function e(t,e){var u;if("undefined"==typeof StopIteration){try{u=n[t](e)}catch(t){return k(t)}return u.done?h(u.value):g(u.value,i,o)}try{u=n[t](e)}catch(t){return r(t)?h(t.value):k(t)}return g(u,i,o)}var n=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function C(t){h.done(h.async(t)())}function U(t){throw new J(t)}function D(t){return function(){return j([this,N(arguments)],function(e,n){return t.apply(e,n)})}}function L(t,e,n){return h(t).dispatch(e,n)}function N(t){return g(t,function(t){var e=0,n=y();return X(t,function(r,i,o){var u;_(i)&&"fulfilled"===(u=i.inspect()).state?t[o]=u.value:(++e,g(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function M(t){if(0===t.length)return h.resolve();var e=h.defer(),n=0;return X(t,function(r,i,o){function u(t){e.resolve(t)}function s(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function c(t){e.notify({index:o,value:t})}var f=t[o];n++,g(f,u,s,c)},void 0),e.promise}function Y(t){return g(t,function(t){return t=tt(t,h),g(N(tt(t,function(t){return g(t,H,H)})),function(){return t})})}function F(t){return h(t).allSettled()}function z(t,e){return h(t).then(void 0,void 0,e)}function G(t,e){return h(t).nodeify(e)}var W=!1;try{throw new Error}catch(t){W=!!t.stack}var Q,J,$=p(),H=function(){},K=function(){function e(){for(var t,e;r.next;)r=r.next,t=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),n(t,e);for(;a.length;)t=a.pop(),n(t);u=!1}function n(t,n){try{t()}catch(t){if(f)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}var r={task:void 0,next:null},i=r,u=!1,c=void 0,f=!1,a=[];if(K=function(e){i=i.next={task:e,domain:f&&t.domain,next:null},u||(u=!0,c())},"object"===("undefined"==typeof t?"undefined":s(t))&&"[object process]"===t.toString()&&t.nextTick)f=!0,c=function(){t.nextTick(e)};else if("function"==typeof o)c="undefined"!=typeof window?o.bind(window,e):function(){o(e)};else if("undefined"!=typeof MessageChannel){var p=new MessageChannel;p.port1.onmessage=function(){c=l,p.port1.onmessage=e,e()};var l=function(){p.port2.postMessage(0)};c=function(){setTimeout(e,0),l()}}else c=function(){setTimeout(e,0)};return K.runAfter=function(t){a.push(t),u||(u=!0,c())},K}(),V=Function.call,Z=e(Array.prototype.slice),X=e(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),q=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),tt=e(Array.prototype.map||function(t,e){var n=this,r=[];return X(n,function(i,o,u){r.push(t.call(e,o,u,n))},void 0),r}),et=Object.create||function(t){function e(){}return e.prototype=t,new e},nt=e(Object.prototype.hasOwnProperty),rt=Object.keys||function(t){var e=[];for(var n in t)nt(t,n)&&e.push(n);return e},it=e(Object.prototype.toString);J="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var ot="From previous event:";h.resolve=h,h.nextTick=K,h.longStackSupport=!1,"object"===("undefined"==typeof t?"undefined":s(t))&&t&&t.env&&t.env.Q_DEBUG&&(h.longStackSupport=!0),h.defer=y,y.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(Z(arguments,1)):t.resolve(n)}},h.Promise=d,h.promise=d,d.race=v,d.all=N,d.reject=k,d.resolve=h,h.passByCopy=function(t){return t},m.prototype.passByCopy=function(){return this},h.join=function(t,e){return h(t).join(e)},m.prototype.join=function(t){return h([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},h.race=v,m.prototype.race=function(){return this.then(h.race)},h.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(t){return k(t)}}function o(t){if("function"==typeof e){i(t,s);try{return e(t)}catch(t){return k(t)}}return k(t)}function u(t){return"function"==typeof n?n(t):t}var s=this,c=y(),f=!1;return h.nextTick(function(){s.promiseDispatch(function(t){f||(f=!0,c.resolve(r(t)))},"when",[function(t){f||(f=!0,c.resolve(o(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=u(t)}catch(t){if(n=!0,!h.onerror)throw t;h.onerror(t)}n||c.notify(e)}]),c.promise},h.tap=function(t,e){return h(t).tap(e)},m.prototype.tap=function(t){return t=h(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},h.when=g,m.prototype.thenResolve=function(t){return this.then(function(){return t})},h.thenResolve=function(t,e){return h(t).thenResolve(e)},m.prototype.thenReject=function(t){return this.then(function(){throw t})},h.thenReject=function(t,e){return h(t).thenReject(e)},h.nearer=w,h.isPromise=_,h.isPromiseAlike=b,h.isPending=E,m.prototype.isPending=function(){return"pending"===this.inspect().state},h.isFulfilled=S,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},h.isRejected=T,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ut=[],st=[],ct=[],ft=!0;h.resetUnhandledRejections=A,h.getUnhandledReasons=function(){return ut.slice()},h.stopUnhandledRejectionTracking=function(){A(),ft=!1},A(),h.reject=k,h.fulfill=P,h.master=O,h.spread=j,m.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},h.async=I,h.spawn=C,h.return=U,h.promised=D,h.dispatch=L,m.prototype.dispatch=function(t,e){var n=this,r=y();return h.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},h.get=function(t,e){return h(t).dispatch("get",[e])},m.prototype.get=function(t){return this.dispatch("get",[t])},h.set=function(t,e,n){return h(t).dispatch("set",[e,n])},m.prototype.set=function(t,e){return this.dispatch("set",[t,e])},h.del=h.delete=function(t,e){return h(t).dispatch("delete",[e])},m.prototype.del=m.prototype.delete=function(t){return this.dispatch("delete",[t])},h.mapply=h.post=function(t,e,n){return h(t).dispatch("post",[e,n])},m.prototype.mapply=m.prototype.post=function(t,e){return this.dispatch("post",[t,e])},h.send=h.mcall=h.invoke=function(t,e){return h(t).dispatch("post",[e,Z(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(t){return this.dispatch("post",[t,Z(arguments,1)])},h.fapply=function(t,e){return h(t).dispatch("apply",[void 0,e])},m.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},h.try=h.fcall=function(t){return h(t).dispatch("apply",[void 0,Z(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,Z(arguments)])},h.fbind=function(t){var e=h(t),n=Z(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(Z(arguments))])}},m.prototype.fbind=function(){var t=this,e=Z(arguments);return function(){return t.dispatch("apply",[this,e.concat(Z(arguments))])}},h.keys=function(t){return h(t).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},h.all=N,m.prototype.all=function(){return N(this)},h.any=M,m.prototype.any=function(){return M(this)},h.allResolved=l(Y,"allResolved","allSettled"),m.prototype.allResolved=function(){return Y(this)},h.allSettled=F,m.prototype.allSettled=function(){return this.then(function(t){return N(tt(t,function(t){function e(){return t.inspect()}return t=h(t),t.then(e,e)}))})},h.fail=h.catch=function(t,e){return h(t).then(void 0,e)},m.prototype.fail=m.prototype.catch=function(t){return this.then(void 0,t)},h.progress=z,m.prototype.progress=function(t){return this.then(void 0,void 0,t)},h.fin=h.finally=function(t,e){return h(t).finally(e)},m.prototype.fin=m.prototype.finally=function(t){return t=h(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},h.done=function(t,e,n,r){return h(t).done(e,n,r)},m.prototype.done=function(e,n,r){var o=function(t){h.nextTick(function(){if(i(t,u),!h.onerror)throw t;h.onerror(t)})},u=e||n||r?this.then(e,n,r):this;"object"===("undefined"==typeof t?"undefined":s(t))&&t&&t.domain&&(o=t.domain.bind(o)),u.then(void 0,o)},h.timeout=function(t,e,n){return h(t).timeout(e,n)},m.prototype.timeout=function(t,e){var n=y(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},h.delay=function(t,e){return void 0===e&&(e=t,t=void 0),h(t).delay(e)},m.prototype.delay=function(t){return this.then(function(e){var n=y();return setTimeout(function(){n.resolve(e)},t),n.promise})},h.nfapply=function(t,e){return h(t).nfapply(e)},m.prototype.nfapply=function(t){var e=y(),n=Z(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},h.nfcall=function(t){var e=Z(arguments,1);return h(t).nfapply(e)},m.prototype.nfcall=function(){var t=Z(arguments),e=y();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},h.nfbind=h.denodeify=function(t){var e=Z(arguments,1);return function(){var n=e.concat(Z(arguments)),r=y();return n.push(r.makeNodeResolver()),h(t).fapply(n).fail(r.reject),r.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var t=Z(arguments);return t.unshift(this),h.denodeify.apply(void 0,t)},h.nbind=function(t,e){var n=Z(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(Z(arguments)),o=y();return i.push(o.makeNodeResolver()),h(r).fapply(i).fail(o.reject),o.promise}},m.prototype.nbind=function(){var t=Z(arguments,0);return t.unshift(this),h.nbind.apply(void 0,t)},h.nmapply=h.npost=function(t,e,n){return h(t).npost(e,n)},m.prototype.nmapply=m.prototype.npost=function(t,e){var n=Z(e||[]),r=y();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},h.nsend=h.nmcall=h.ninvoke=function(t,e){var n=Z(arguments,2),r=y();return n.push(r.makeNodeResolver()),h(t).dispatch("post",[e,n]).fail(r.reject),r.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(t){var e=Z(arguments,1),n=y();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},h.nodeify=G,m.prototype.nodeify=function(t){return t?void this.then(function(e){h.nextTick(function(){t(null,e)})},function(e){h.nextTick(function(){t(e)})}):this},h.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var at=p();return h})}).call(e,n(1),n(4).setImmediate,n(13)(t))},function(t,e){"use strict";"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return t&&"object"===("undefined"==typeof t?"undefined":n(t))&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t,r){"use strict";function i(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function u(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function c(t,n,r){if(t.customInspect&&n&&R(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return w(i)||(i=c(t,i,r)),i}var o=f(t,n);if(o)return o;var u=Object.keys(n),d=s(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(n)),A(n)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return a(n);if(0===u.length){if(R(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return a(n)}var m="",g=!1,_=["{","}"];if(y(n)&&(g=!0,_=["[","]"]),R(n)){var b=n.name?": "+n.name:"";m=" [Function"+b+"]"}if(E(n)&&(m=" "+RegExp.prototype.toString.call(n)),T(n)&&(m=" "+Date.prototype.toUTCString.call(n)),A(n)&&(m=" "+a(n)),0===u.length&&(!g||0==n.length))return _[0]+m+_[1];if(r<0)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var S;return S=g?p(t,n,r,d,u):u.map(function(e){return l(t,n,r,d,e,g)}),t.seen.pop(),h(S,m,_)}function f(t,e){if(b(e))return t.stylize("undefined","undefined");if(w(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function a(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,i){for(var o=[],u=0,s=e.length;u<s;++u)O(e,String(u))?o.push(l(t,e,n,r,String(u),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))}),o}function l(t,e,n,r,i,o){var u,s,f;if(f=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},f.get?s=f.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):f.set&&(s=t.stylize("[Setter]","special")),O(r,i)||(u="["+i+"]"),s||(t.seen.indexOf(f.value)<0?(s=v(n)?c(t,f.value,null):c(t,f.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),b(u)){if(o&&i.match(/^\d+$/))return s;u=JSON.stringify(""+i),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+s}function h(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function y(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function g(t){return"number"==typeof t}function w(t){return"string"==typeof t}function _(t){return"symbol"===("undefined"==typeof t?"undefined":j(t))}function b(t){return void 0===t}function E(t){return S(t)&&"[object RegExp]"===k(t)}function S(t){return"object"===("undefined"==typeof t?"undefined":j(t))&&null!==t}function T(t){return S(t)&&"[object Date]"===k(t)}function A(t){return S(t)&&("[object Error]"===k(t)||t instanceof Error)}function R(t){return"function"==typeof t}function B(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===("undefined"==typeof t?"undefined":j(t))||"undefined"==typeof t}function k(t){return Object.prototype.toString.call(t)}function P(t){return t<10?"0"+t.toString(10):t.toString(10)}function x(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,u=String(t).replace(I,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<o;s=r[++n])u+=v(s)||!S(s)?" "+s:" "+i(s);return u},e.deprecate=function(n,i){function o(){if(!u){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),u=!0}return n.apply(this,arguments)}if(b(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var u=!1;return o};var C,U={};e.debuglog=function(t){if(b(C)&&(C=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!U[t])if(new RegExp("\\b"+t+"\\b","i").test(C)){var n=r.pid;U[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else U[t]=function(){};return U[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=y,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=m,e.isNumber=g,e.isString=w,e.isSymbol=_,e.isUndefined=b,e.isRegExp=E,e.isObject=S,e.isDate=T,e.isError=A,e.isFunction=R,e.isPrimitive=B,e.isBuffer=n(11);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",x(),e.format.apply(e,arguments))},e.inherits=n(10),e._extend=function(t,e){if(!e||!S(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(1))},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){/*
	 *
	 *  Photoshop-Connection
	 *  Node.js module for connecting to Adobe Photoshop Server.
	 *  Author: Antonio Gomez (https://github.com/antonio-gomez)
	 * 
	 *
	 *  @link https://github.com/antonio-gomez/photoshop-connection
	 *  @version v0.0.0
	 *  @license MIT
	 *
	 */
"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});n(15),e.PhotoshopClient=function t(e){r(this,t),this.options=e}},function(t,e,n){(function(t,r){"use strict";!function(){function i(e,n,r){if(e.length>=n)return e;var i=new t(n);return r?e.copy(i,0,0,r):e.copy(i),i}function o(t,e){var n=Math.pow(10,e);return Math.round(n*t)/n}function u(e,n,r){var i=this;if(!(i instanceof u))return new u(e,n,r);var o=h;e.hasOwnProperty("password")&&(o=e.password),e.hasOwnProperty("port")&&(i._port=e.port),e.hasOwnProperty("hostname")&&(i._hostname=e.hostname),e.hasOwnProperty("inputFd")&&(i._inputFd=e.inputFd),e.hasOwnProperty("outputFd")&&(i._outputFd=e.outputFd),i._logger=r,i._receiveBuffer=new t(C),i._receivedBytes=0,i._writeQueue=[],n&&this.once("connect",n);var s=null,c=null;if("number"==typeof i._inputFd&&"number"==typeof i._outputFd||"string"==typeof i._inputFd&&"string"==typeof i._outputFd){s=i._connectPipe();var f=p.defer();f.resolve(),c=f.promise}else if(i._hostname&&"number"==typeof i._port)s=i._connectSocket(),c=i._initCrypto(o);else{var a=p.defer();a.reject(),s=a.promise}p.all([s,c]).done(function(){i.emit("connect")},function(t){i.emit("error",t),i.disconnect()})}function s(t,e,n){return new u(t,e,n)}var c=n(12),f=n(6).EventEmitter,a=n(3),p=n(9),l=n(16),h="password",y=49494,d="127.0.0.1",v=1e3,m={NONE:0,CONNECTING:1,OPEN:2,CLOSING:3,CLOSED:4,DESTROYED:5},g=0,w=4,_=4,b=w+_,E=12,S=0,T=4,A=8,R=16777216,B=1,k=1,P=2,x=3,O=4,j=6,I=0,C=65536,U=["","[ActionDescriptor]","Yep, still alive"];c.inherits(u,f),u.prototype._port=y,u.prototype._hostname=d,u.prototype._connectionState=m.NONE,u.prototype._lastMessageID=0,u.prototype._crypto=null,u.prototype._receiveBuffer=null,u.prototype._receivedBytes=0,u.prototype._writeQueue=null,u.prototype._commandDeferreds=null,u.prototype._initCrypto=function(t){var e=this,n=p.defer();return l.createPSCrypto(t,function(t,r){t?n.reject(t):(e._crypto=r,n.resolve())}),n.promise},u.prototype._connectPipe=function(){var t=this,e=n(3),r=!1;try{t._connectionState=m.CONNECTING,"number"==typeof t._inputFd?t._readStream=e.createReadStream(null,{fd:t._inputFd}):(t.emit("info","using named read pipe "+t._inputFd),t._readStream=e.createReadStream(t._inputFd)),t._readStream.on("data",function(e){var n=0===t._receivedBytes,r=e.length+t._receivedBytes;t._receiveBuffer=i(t._receiveBuffer,r),e.copy(t._receiveBuffer,t._receivedBytes),t._receivedBytes+=e.length,t._processReceiveBuffer(n)}),t._readStream.on("error",function(e){t.emit("error","Pipe read error: "+e),t.disconnect()}),t._readStream.on("close",function(){t._connectionState=m.CLOSED,t.emit("close")}),t._readStream.resume(),"number"==typeof t._outputFd?t._writeStream=e.createWriteStream(null,{fd:t._outputFd}):(t.emit("info","using named write pipe "+t._outputFd),t._writeStream=e.createWriteStream(t._outputFd)),t._writeStream.on("error",function(e){t.emit("error","Pipe write error: "+e),t.disconnect()}),t._writeStream.on("close",function(){t._connectionState=m.CLOSED,t.emit("close")}),t._writeStream.on("drain",function(){t._doPendingWrites()}),r=!0}catch(e){t.emit("error","Connect Pipe error: "+e),t.disconnect()}return r},u.prototype._connectSocket=function(){var t=this,e=p.defer();return t._socket=new a.Socket,t._connectionState=m.CONNECTING,t._socket.connect(t._port,t._hostname),t._socket.on("connect",function(){t._socket.setKeepAlive(!0,v),t._socket.setNoDelay(),e.resolve(t),t._writeStream=t._socket}),t._socket.on("error",function(n){e.promise.isPending()&&e.reject(n),t.emit("error","Socket error: "+n),t.disconnect()}),t._socket.on("close",function(){t._connectionState=m.CLOSED,t.emit("close")}),t._socket.on("data",function(e){var n=0===t._receivedBytes,r=e.length+t._receivedBytes;t._receiveBuffer=i(t._receiveBuffer,r),e.copy(t._receiveBuffer,t._receivedBytes),t._receivedBytes+=e.length,t._processReceiveBuffer(n)}),t._socket.on("drain",function(){t._doPendingWrites()}),e.promise},u.prototype._writeWhenFree=function(t){var e=this;e._writeQueue.push(t),r.nextTick(function(){e._doPendingWrites()})},u.prototype._doPendingWrites=function(){if(this._writeStream&&this._writeQueue.length>0&&!this._writeStream.busy){var t=this._writeQueue.shift(),e=this._writeStream.write(t);e&&this._writeQueue.length>0&&this._doPendingWrites()}this._writeStream&&this._writeQueue.length>0&&r.nextTick(this._doPendingWrites.bind(this))},u.prototype.isConnected=function(){return this._connectionState===m.OPEN},u.prototype.disconnect=function(t){if(t||(t=function(){}),!this._socket){if(this._readStream){try{this._readStream.close()}catch(t){}this._readStream=null}if(this._writeStream){try{this._writeStream.close()}catch(t){}this._writeStream=null}return this._connectionState=m.CLOSED,r.nextTick(t),!0}var e=this._connectionState;switch(e){case m.NONE:return this._connectionState=m.CLOSED,r.nextTick(t),!0;case m.CONNECTING:return this._connectionState=m.CLOSING,this._socket.once("close",t),this._socket.end(),!0;case m.OPEN:return this._connectionState=m.CLOSING,this._socket.once("close",t),this._socket.end(),!0;case m.CLOSING:return this._socket.once("close",t),!0;case m.CLOSED:return r.nextTick(t),!0;case m.DESTROYED:return r.nextTick(t),!0}},u.prototype.destroy=function(){this._connectionState=m.DESTROYED,this._socket&&this._socket.destroy()},u.prototype._sendMessage=function(e){var n=this._crypto?this._crypto.cipher(e):e,r=new t(b),i=n.length+_;r.writeUInt32BE(i,g),r.writeInt32BE(I,w),this._writeWhenFree(r),this._writeWhenFree(n)},u.prototype.sendKeepAlive=function(){var e=this._lastMessageID=(this._lastMessageID+1)%R,n=new t(E);return n.writeUInt32BE(B,S),n.writeUInt32BE(e,T),n.writeUInt32BE(j,A),this._sendMessage(n),e},u.prototype.sendCommand=function(e){var n=this._lastMessageID=(this._lastMessageID+1)%R,r=new t(e,"utf8"),i=new t(r.length+E);return i.writeUInt32BE(B,S),i.writeUInt32BE(n,T),i.writeUInt32BE(P,A),r.copy(i,E),this._sendMessage(i),n},u.prototype._processReceiveBuffer=function(e){if(e&&this._receivedBytes>0&&(this.messageStartTime=(new Date).getTime()),!(this._receivedBytes<b)){var n=this._receiveBuffer.readInt32BE(w);if(n!==I)return console.error("Communication error: "+n),this.emit("communicationsError","Photoshop communication error: "+n),void this.disconnect();var r=this._receiveBuffer.readUInt32BE(g),u=r+w;if(this._receiveBuffer=i(this._receiveBuffer,u,this._receivedBytes),!(this._receivedBytes<u)){var s=(new Date).getTime()-this.messageStartTime;if(s>10){var c=this._receivedBytes/1024,f=c/(s/1e3);this._logger.info(s+"ms to receive "+o(c,1)+" kB ("+o(f,1)+" kB/s)")}var a=this._receiveBuffer.slice(b,u),p=this._receivedBytes-u,l=Math.max(C,p),h=this._receiveBuffer;this._receiveBuffer=new t(l),p>0&&h.copy(this._receiveBuffer,0,u,this._receivedBytes),this._receivedBytes=p;var y=(new Date).getTime(),d=this._crypto?this._crypto.decipher(a):a;s=(new Date).getTime()-y,s>10&&this._logger.info(s+"ms to decrypt buffer"),this._processMessage(d),this._processReceiveBuffer(!0)}}},u.prototype._processMessage=function(t){var e=t.readUInt32BE(S),n=t.readUInt32BE(T),r=t.readUInt32BE(A),i=t.slice(E),o={protocolVersion:e,id:n,type:r,body:i};if(e!==B)this.emit("communicationsError","unknown protocol version",e);else if(r===P){var u=i.toString("utf8"),s=u.split("\r"),c=null,f=null;if(2===s.length&&(c=s[0]),f=s[s.length-1],U.indexOf(f)===-1)try{f=JSON.parse(f)}catch(t){}c?this.emit("event",n,c,f,o):this.emit("message",n,f,o)}else r===x?this.emit("pixmap",n,i,o):r===O?this.emit("iccProfile",n,i,o):r===k?this.emit("error",{id:n,body:i.toString("utf8")}):this.emit("communicationsError","unknown message type",r)},e.PhotoshopClient=u,e.createClient=s}()}).call(e,n(2).Buffer,n(1))},function(t,e,n){(function(t){"use strict";!function(){function r(t){this._derivedKey=t}function i(t,e){o.pbkdf2(t,u,s,f,function(t,n){t?e(t,null):e(null,new r(n))})}var o=n(3),u="Adobe Photoshop",s=1e3,c="des-ede3-cbc",f=24,a=new t("000000005d260000","hex");r.prototype.decipher=function(e){var n=o.createDecipheriv(c,this._derivedKey,a);return new t(n.update(e,"binary","binary")+n.final("binary"),"binary")},r.prototype.cipher=function(e){var n=o.createCipheriv(c,this._derivedKey,a);return new t(n.update(e,"binary","binary")+n.final("binary"),"binary")},e.createPSCrypto=i}()}).call(e,n(2).Buffer)}]);